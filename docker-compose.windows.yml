services:
  backend:
    build:
      context: ./backend
      dockerfile: Dockerfile.windows
    container_name: sihub-backend
    ports:
      - "8000:8000"
    environment:
      - ORACLE_USER=${ORACLE_USER:-user}
      - ORACLE_PASSWORD=${ORACLE_PASSWORD:-password}
      - ORACLE_DSN=${ORACLE_DSN:-localhost:1521/xe}
      - USE_MOCK_DB=${USE_MOCK_DB:-True}
    # Bind mounts can be tricky on Windows Native, prefer Named Volumes or Copy
    # For dev reload, simple path mapping often fails without specialized setup.
    # We stick to COPY build strategy for stability in this config.

  frontend:
    build:
      context: ./frontend
      dockerfile: Dockerfile.windows
    container_name: sihub-frontend
    ports:
      # Map host 80 to container 3000 (serve default)
      - "80:3000"
    depends_on:
      - backend
